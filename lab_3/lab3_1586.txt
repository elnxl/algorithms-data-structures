1) Решать будем динамическим перебором. 
2) Динамика: [количество цифр][предпоследняя цифра][последняя цифра]. 
3) На каждом шаге будем пытаться дописать цифру. 
4) Если последнии 3 цифры - простое число, то добавлять [количество цифр в текущем числе + 1][последняя цифра][новая цифра, которую хотим приписать].
5) Считаем это по модулю.
6) Находим ответ: сумма всех [введенное число][от 0 до 9][от 0 до 9].